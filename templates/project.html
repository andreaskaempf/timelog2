{{ template "header.html" . }}

  <h1 class="title">
    Project: {{ .project.Name }}
    <a href="/edit_project?id={{ .project.Id }}" class="button is-small is-primary" style="float: right; margin-left: 0.5em;" title="Edit project">Edit</a>
    <a href="/projects" class="button is-small" style="float: right; margin-left: 0.5em;" title="Back to projects list">‚Üê Back</a>
    <button onclick="confirmDelete({{ .project.Id }}, this)" class="button is-small is-danger" style="float: right;" title="Delete project" data-project-name="{{ .project.Name }}">Delete</button>
  </h1>

  <script>
    function confirmDelete(id, button) {
      var projectName = button.getAttribute('data-project-name');
      if (confirm('Are you sure you want to delete project "' + projectName + '"?\n\nThis will also delete all work records associated with this project.\n\nThis action cannot be undone.')) {
        window.location.href = '/delete_project/' + id;
      }
    }
  </script>

  <div class="content">
    <table class="table">
      <tbody>
        <tr>
          <th>ID</th>
          <td>{{ .project.Id }}</td>
        </tr>
        <tr>
          <th>Client</th>
          <td>{{ .project.Client }}</td>
        </tr>
        <tr>
          <th>Name</th>
          <td>{{ .project.Name }}</td>
        </tr>
        <tr>
          <th>Description</th>
          <td>{{ .project.Description }}</td>
        </tr>
        <tr>
          <th>Category</th>
          <td>{{ .project.Category }}</td>
        </tr>
        <tr>
          <th>Active</th>
          <td>
            {{ if .project.Active }}
              <span class="tag is-success">Active</span>
            {{ else }}
              <span class="tag is-danger">Inactive</span>
            {{ end }}
          </td>
        </tr>
      </tbody>
    </table>

    <h2 class="subtitle" style="margin-top: 2rem;">Log Entries</h2>
    {{ if .entries }}
    <table class="table is-fullwidth">
      <thead>
        <tr>
          <th style="width: 20%;">Date</th>
          <th style="width: 10%;">Hours</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {{ range .entries }}
        <tr>
          <td><a href="/work_entry/{{ .Id }}">{{ .WorkDate }}</a></td>
          <td>{{ printf "%.2f" .Hours }}</td>
          <td>{{ .Description }}</td>
        </tr>
        {{ end }}
      </tbody>
      <tfoot>
        <tr>
          <th colspan="2">Entries</th>
          <td>{{ .totalCount }}</td>
        </tr>
        <tr>
          <th colspan="2">Total Hours</th>
          <td>{{ printf "%.2f" .totalHours }}</td>
        </tr>
      </tfoot>
    </table>
    {{ else }}
    <p>No log entries for this project yet.</p>
    {{ end }}
  </div>

{{ template "footer.html" .}}

